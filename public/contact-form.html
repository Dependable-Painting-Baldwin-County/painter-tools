<!DOCTYPE html>
<html lang="en">

<head>
  <script>
    (function (w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f); })(window, document, 'script', 'dataLayer', 'GTM-5SHM99TL');
  </script>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="/styles.css">
  <style>
    /* Page-specific contact form overrides */
    main.contact-wrapper { padding:4rem 2rem; background:var(--dark-bg); }
    .main-title { font-size:2.4rem; margin-bottom:1rem; color:var(--brand-color); }
    .main-subtitle { color:var(--text-muted); font-size:1.05rem; max-width:700px; margin:0 auto 2.2rem; }
    #contact-form-section { max-width:640px; margin:0 auto; background:var(--light-bg); padding:2.3rem 2.2rem; border-radius:18px; box-shadow:0 10px 25px rgba(0,0,0,.4); text-align:left; }
    #contact-form label { display:block; color:var(--brand-color); font-weight:600; margin-bottom:.45rem; font-size:.87rem; letter-spacing:.5px; }
    #contact-form input, #contact-form select, #contact-form textarea { width:100%; padding:.85rem .9rem; border-radius:10px; border:1px solid var(--border-color); background:#1e1e1e; color:var(--text-light); font-size:.95rem; margin-bottom:1.2rem; }
    #contact-form textarea { min-height:140px; resize:vertical; }
    #contact-form button { background:var(--brand-color); color:#fff; padding:1rem 2rem; border-radius:10px; border:none; cursor:pointer; font-size:1.05rem; font-weight:700; width:100%; transition:background .3s, transform .2s, box-shadow .3s; }
    #contact-form button:hover:not(:disabled){ background:#e00000; transform:translateY(-2px); box-shadow:0 6px 14px rgba(255,59,59,.35); }
    #contact-form button:disabled { background:#444; cursor:not-allowed; }
    #response { margin-top:1rem; background:#181818; border:1px solid #262626; padding:1rem; border-radius:8px; min-height:60px; font-size:.9rem; }
    .back-to-home { color:var(--brand-color); font-weight:600; }
    .back-to-home:hover { text-decoration:underline; }
    @media (max-width: 768px){ main.contact-wrapper { padding:2.5rem 1.1rem; } #contact-form-section { padding:1.8rem 1.5rem; } }
  </style>
    footer a {
      color: var(--brand-color);
      text-decoration: none;
    }

    @media (max-width: 768px) {

      header,
      main {
        padding: 1rem;
      }

      main {
        padding-top: 2rem;
        padding-bottom: 2rem;
      }

      .main-title {
        font-size: 2rem;
      }

      .main-subtitle {
        font-size: 1rem;
      }

      #contact-form-section {
        padding: 1.5rem;
      }
    }
  </style>
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        { "@type": "WebPage", "@id": "https://dependablepainting.work/contact-form.html#webpage", "url": "https://dependablepainting.work/contact-form.html", "name": "Contact Form | Dependable Painting", "isPartOf": { "@id": "https://dependablepainting.work/#organization" } },
        { "@type": "BreadcrumbList", "itemListElement": [
          {"@type":"ListItem","position":1,"name":"Home","item":"https://dependablepainting.work/"},
          {"@type":"ListItem","position":2,"name":"Contact","item":"https://dependablepainting.work/contact-form.html"}
        ]}
      ]
    }
    </script>
</head>

<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5SHM99TL" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>

  <header>
    <div class="brand">
      <a href="/">
        <img src="https://imagedelivery.net/VwxTcpKX2CusqbCCDB94Nw/7c414308-e0a9-4da3-dd68-f9c4a6ed9800/icon512"
          alt="Dependable Painting Logo">
        <span>Dependable Painting</span>
      </a>
    </div>
  </header>

  <main>
    <section id="contact-form-section">
      <h1 class="main-title">Get Your Free Painting Estimate</h1>
      <p class="main-subtitle">Fast, no-hassle quotes for your project. Get pricing, timelines, and expert advice from
        Dependable Painting.</p>
      <form id="contact-form" action="/api/estimate" method="POST">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" placeholder="Your Full Name" required />

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" placeholder="your@email.com" />

        <label for="phone">Phone:</label>
        <input type="tel" id="phone" name="phone" placeholder="(123) 456-7890" />

        <label for="city">City:</label>
        <input type="text" id="city" name="city" placeholder="City (e.g., Daphne)" required />

        <label for="service">Service of Interest:</label>
        <select id="service" name="service" required>
          <option value="">-- Please Select --</option>
          <option value="interior-painting">Interior Painting</option>
          <option value="exterior-painting">Exterior Painting</option>
          <option value="cabinet-painting">Cabinet Painting</option>
          <option value="commercial-painting">Commercial Painting</option>
          <option value="other">Other</option>
        </select>

        <label for="message">Message:</label>
        <textarea id="message" name="message" rows="5" placeholder="Tell us about your project..." required></textarea>

        <button type="submit">Get My Estimate</button>
      </form>
      <div id="response" aria-live="polite"></div>
    </section>

    <p class="contact-info">
  Prefer to talk? <a href="tel:+12514235855">Call us</a> or <a
        href="mailto:just-paint-it@dependablepainting.work">email us</a> directly.
    </p>
    <div class="back-to-home-wrapper">
      <a href="/" class="back-to-home">← Back to Home</a>
    </div>
  </main>

  <footer>
  <p>© <span id="current-year"></span> Dependable Painting • <a href="tel:+12514235855">(251) 423-5855</a> • Bay
  <script src="/chat-widget.js" defer></script>
      Minette, AL</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('contact-form');
      const responseDiv = document.getElementById('response');
      const yearSpan = document.getElementById('current-year');

      if (yearSpan) {
        yearSpan.textContent = new Date().getFullYear();
      }

      if (!form) return;

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const submitButton = form.querySelector('button');
        submitButton.disabled = true;
        submitButton.textContent = 'Submitting...';
        responseDiv.textContent = '';

        try {
          const usp = new URLSearchParams(location.search);
          const getSS = (k) => (sessionStorage.getItem(k) || usp.get(k) || '').trim();
          const payload = {
            name: form.name.value.trim(),
            email: form.email.value.trim(),
            phone: form.phone.value.trim(),
            city: form.city.value.trim(),
            service: form.service.value.trim(),
            message: form.message.value.trim(),
            source: getSS('source'),
            gclid: getSS('gclid'),
            utm_source: getSS('utm_source'),
            utm_medium: getSS('utm_medium'),
            utm_campaign: getSS('utm_campaign')
          };

          const r = await fetch('/api/estimate', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });

          if (r.ok) {
            if (typeof gtag === 'function') {
              gtag('event', 'generate_lead', { event_category: 'Lead', event_label: 'Contact Form', value: 1 });
            }
            if (window.dpSend) window.dpSend('form_submit', { ok: true });
            // Redirect to actual file path
            window.location.href = '/thank-you.html';
          } else {
            const result = await r.json().catch(() => ({}));
            responseDiv.textContent = result.error || 'Submission failed. Please try again.';
            if (window.dpSend) window.dpSend('form_submit', { ok: false, code: r.status });
          }
        } catch (err) {
          console.error('Submission error:', err);
          responseDiv.textContent = 'A network error occurred. Please try again.';
          if (window.dpSend) window.dpSend('form_submit', { ok: false, code: 'network_error' });
        } finally {
          submitButton.disabled = false;
          submitButton.textContent = 'Get My Estimate';
        }
      });
    });

    // --- Analytics Tracking ---
    (function () {
      var sid = localStorage.getItem('dp_sid');
      if (!sid) { sid = 's_' + Math.random().toString(36).slice(2, 10); localStorage.setItem('dp_sid', sid); }
      var PAGE = location.pathname || '/';
      var SVC = 'other'; // It's a general contact form

      function send(type, extra) {
        var U = new URLSearchParams(location.search);
        var utm = {
          source: sessionStorage.getItem('utm_source') || U.get('utm_source') || '',
          medium: sessionStorage.getItem('utm_medium') || U.get('utm_medium') || '',
          campaign: sessionStorage.getItem('utm_campaign') || U.get('utm_campaign') || ''
        };
        var gclid = sessionStorage.getItem('gclid') || U.get('gclid') || '';
        if (utm.source) sessionStorage.setItem('utm_source', utm.source);
        if (utm.medium) sessionStorage.setItem('utm_medium', utm.medium);
        if (utm.campaign) sessionStorage.setItem('utm_campaign', utm.campaign);
        if (gclid) sessionStorage.setItem('gclid', gclid);
        var payload = Object.assign({ type, page: PAGE, service: SVC, session: sid, utm, gclid }, extra || {});
        var body = new Blob([JSON.stringify(payload)], { type: 'application/json' });
        navigator.sendBeacon('/api/track', body) || fetch('/api/track', { method: 'POST', headers: { 'content-type': 'application/json' }, body: JSON.stringify(payload) });
      }
      window.dpSend = send;
      send('visit');

      let started = false;
      document.getElementById('contact-form')?.addEventListener('focusin', () => {
        if (!started) {
          started = true;
          send('form_start');
        }
      }, { once: true });
    })();
  </script>
</body>

</html>
